<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>训练/推理｜LeRobot 工具套件V1</title>
  <link rel="stylesheet" href="assets/app.css"/>
  <script src="js/app-config.js"></script>
  <script src="js/i18n.js"></script>
  <script src="js/cmdgen.js"></script>
  <script src="js/fab-settings.js"></script>
</head>
<body>
  <div class="header">
    <div class="header-inner">
      <div>
        <h1>训练/推理</h1>
        <div class="small muted">当前版本先把“训练相关配置”集中到设置里，并生成基础训练命令。云端一键训练/推理后续可直接在此页扩展。</div>
      </div>
      <div class="topbar-right">
        <a class="navbtn" href="servo.html" data-i18n="nav.servo">舵机配置</a>
        <a class="navbtn" href="cmd.html" data-i18n="nav.cmd">LeRobot 命令生成</a>
        <a class="navbtn active" href="train.html" data-i18n="nav.train">训练/推理</a>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="row">
      <span class="pill" id="hfPill">HF: -</span>
      <span class="pill" id="cloudPill">Cloud: -</span>
      <span class="spacer"></span>
      <button class="btn" id="btnRefresh">刷新</button>
    </div>

    <div class="section">
      <div class="sectionTitle">本地训练命令</div>
      <div class="cmdCard">
        <div class="cmdLine" id="cmdTrain"></div>
        <div class="cmdActions">
          <button class="btn" id="btnCopyTrain">复制</button>
        </div>
      </div>
      <p class="small muted" style="margin-top:10px">
        下一步你可以在这里加入：

        1）绑定 Hugging Face（token）并一键推送/拉取；

        2）云 GPU provider 信息与一键提交训练；

        3）训练完成后一键下载/选择 checkpoint，生成推理命令并在本页管理。
      </p>
    </div>
  </div>

<script>
(() => {
  function render(){
    const cfg = SuiteConfig.get();
    const out = SuiteCmdGen.build(cfg);
    document.getElementById("cmdTrain").textContent = out.header + out.train;
    document.getElementById("hfPill").textContent = "HF: " + (cfg.hf.enabled ? (cfg.hf.username || "enabled") : "disabled");
    document.getElementById("cloudPill").textContent = "Cloud: " + (cfg.cloud.provider || "not set");
  }

  document.getElementById("btnRefresh").addEventListener("click", render);
  document.getElementById("btnCopyTrain").addEventListener("click", async () => {
    await SuiteCmdGen.copy(document.getElementById("cmdTrain").textContent);
  });
  window.addEventListener("suite-config-changed", render);

  SuiteI18n.applyStatic();
  SuiteFAB.mountFAB();
  render();
})();
</script>
</body>
</html>